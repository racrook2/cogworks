import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import $ from 'jquery';

window.$ = $;

const BACKGROUND = '#FFC72C';
const ACTIVE_BACKGROUND = 'darkorange';
const PRIMARY_TEXT = 'black';
const SECONDARY_TEXT = 'brown';
const BORDER = 'black';
const PAPER_VERTICAL = 'lightblue';
const PAPER_HORIZONTAL = 'pink';

const sideNavStyle = {
  background: BACKGROUND,
  border: `2px solid ${BORDER}`,
  borderRadius: '0.5em',
  width: '15em',
  height: '100vh',
  overflow: 'scroll',
  position: 'sticky',
  top: 0,

  ul: {
    counterReset: 'item',
    listStyleType: 'none',
    padding: 0,

    h2: {
      fontSize: '1.25em',
      margin: '0.5em 0 0.5em',
      background: ACTIVE_BACKGROUND,
      width: '100%',
      padding: '0.5em 0',
      textAlign: 'center',
      fontWeight: 'normal'
    },

    hr: {
      border: `1px solid ${SECONDARY_TEXT}`
    }
  }
};

const Section = ({ header, children }) => {
  const [open, setOpen] = useState(true);

  const chevronStyle = {
    cursor: 'pointer',
    background: 'none',
    border: 'none',
    float: 'right',
    fontWeight: 'bolder',
    transform: 'scale(2, 1)',
    marginRight: '0.75em',
    color: SECONDARY_TEXT
  };

  return (
    <>
      <h2>
        {header}
        <button
          css={chevronStyle}
          onClick={() => { setOpen(!open) }}
        >
          {open ? '˄' : '˅'}
        </button>
      </h2>
      {open && children}
    </>
  )
};

const Item = ({ index, link, children }) => {
  const itemStyle = {
    textDecoration: 'none',
    color: PRIMARY_TEXT,

    li: {
      display: 'flex',
      padding: '0.25em 0',

      '&:hover': {
        background: ACTIVE_BACKGROUND
      },

      span: {
        paddingRight: '0.5em',
        display: 'flex',
        alignItems: 'center'
      }
    }
  };

  const rulingStyle = {
    minWidth: '3.5em',
    color: SECONDARY_TEXT,

    hr: {
      display: 'inline-block',
      width: '1.5em',
      margin: '0.25em 0.5em 0.25em 0'
    }
  };

  return (
    <Link to={link} css={itemStyle} >
      <li>
        <span css={rulingStyle}>
          <hr/>{index}
        </span>
        <span>{children}</span>
      </li>
    </Link>
  );
};

const renderSideNav = () => {
  const sections = [
    {
      header: 'Fan Works',
      items: [
        { link: '/', text: 'My Fakémon' },
        { link: '/', text: 'My Comics' },
        { link: '/voltorb_flip', text: 'Voltorb Flip' }
      ]
    },
    {
      header: 'Pokémon Design',
      items: [
        { link: '/', text: 'Analysis Column' },
        { link: '/', text: 'Design Trends Over the Generations' },
        { link: '/', text: 'Fakémon Primer' }
      ]
    },
    {
      header: 'Worldbuilding',
      items: [
        { link: '/', text: 'Are Humans Pokémon?' },
        { link: '/', text: 'What Are Pokémon Types?' },
        { link: '/', text: 'What Are Pokémon Moves?' }
      ]
    },
    {
      header: 'Game Design',
      items: [
        { link: '/', text: 'In Defense of Pokémon GSC\'s Level Curve' },
        { link: '/', text: 'Pokémon RBY\'s Story Structure' },
      ]
    },
    {
      header: 'Writing',
      items: [
        { link: '/', text: 'Pokémon Battles' },
        { link: '/', text: 'Choosing Your Team' },
      ]
    },
    {
      header: 'Resources',
      items: [
        { link: '/pokedex', text: 'Pokédex' },
        { link: '/type_chart', text: 'Type Chart' },
        { link: '/move_list', text: 'Move List' },
        { link: '/ability_list', text: 'Ability List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' },
        { link: '/evolution_list', text: 'Evolution List' }
      ]
    }
  ];

  let i = 0;

  return (
    sections.map((section) => {
      return (
        <Section header={section.header}>
          <hr css={{ margin: 0, width: '0.5em' }}/>
          {
            section.items.map((item) => {
              i++;

              return (
                <>
                  <Item
                    index={i}
                    link={item.link}
                  >
                    {item.text}
                  </Item>
                  <hr css={{ margin: 0, width: '0.5em' }}/>
                </>
              );
            })
          }
        </Section>
      )
    })
  )
};

const SiteSection = ({ header, children }) => {
  const marginStyle = {
    margin: '0 6rem',
    borderLeft: `1px solid ${PAPER_VERTICAL}`
  };

  const sectionStyle = {
    margin: '0 2em',
    border: `1px solid ${BORDER}`,
    backgroundImage: 'radial-gradient(circle at 1.5em, transparent 0.5em, black 0.6em, transparent 1px)',
    backgroundSize: '100% 3em',

    h2: {
      height: '1.25em',
      padding: '1rem 0.5rem 0',
      ...marginStyle
    },

    section: {
      background: `linear-gradient(to bottom, ${PAPER_HORIZONTAL} 1px, transparent 1px)`,
      backgroundSize: '100% 1.5em',

      div: {
        lineHeight: '1.5em',
        padding: '0.5rem',
        ...marginStyle
      }
    }
  };

  return (
    <div css={sectionStyle}>
      <header>
        <h2>{header}</h2>
      </header>
      <section>
        <div>{children}</div>
      </section>
    </div>
  );
};

const Home = () => {
  return (
    <>
      <div css={{ height: '10em' }}>logo</div>
      <div css={{display: 'flex'}}>
        <aside css={{ width: '22.5%', display: 'flex', justifyContent: 'right' }}>
          <nav css={sideNavStyle}>
            <ul>
              {
                renderSideNav()
              }
            </ul>
          </nav>
        </aside>
        <main css={{ width: '55%' }}>
          <SiteSection>
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
            01234567890123456789012345678901234567890123456789012345678901234567890123456789
          </SiteSection>
        </main>
        <aside css={{ width: '22.5%', background: 'red' }}>
          goodbye
        </aside>
      </div>
    </>
  );
};

export default Home;
